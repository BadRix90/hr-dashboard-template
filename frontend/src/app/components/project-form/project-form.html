<div class="modal-overlay" (click)="close()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{ project() ? 'Projekt bearbeiten' : 'Neues Projekt' }}</h2>
      <button class="close-btn" (click)="close()">&times;</button>
    </div>

    <form (ngSubmit)="onSubmit()" class="project-form">
      <div class="form-group">
        <label for="name">Projektname *</label>
        <input
          id="name"
          type="text"
          [value]="form().name"
          (input)="updateField('name', $any($event.target).value)"
          required
          placeholder="z.B. Website Relaunch"
        />
      </div>

      <div class="form-group">
        <label for="description">Beschreibung</label>
        <textarea
          id="description"
          rows="3"
          [value]="form().description"
          (input)="updateField('description', $any($event.target).value)"
          placeholder="Optional: Projektdetails..."
        ></textarea>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <input
            type="checkbox"
            [checked]="form().is_active"
            (change)="updateField('is_active', $any($event.target).checked)"
          />
          <span>Projekt aktiv</span>
        </label>
      </div>

      @if (error()) {
        <div class="error-message">{{ error() }}</div>
      }

      <div class="modal-actions">
        <button type="button" class="btn-secondary" (click)="close()" [disabled]="loading()">
          Abbrechen
        </button>
        <button type="submit" class="btn-primary" [disabled]="loading() || !form().name">
          {{ loading() ? 'Speichern...' : 'Speichern' }}
        </button>
      </div>
    </form>
  </div>
</div>