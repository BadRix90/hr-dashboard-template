<div class="page-container">
  <header class="page-header">
    <h1>{{ text.settings.title }}</h1>
    <p class="text-secondary">{{ text.settings.subtitle }}</p>
  </header>

  <div class="settings-layout">
    <aside class="settings-sidebar">
      <nav class="settings-nav">
        @for (tab of tabs; track tab.id) {
          <button
            class="nav-item"
            [class.active]="activeTab === tab.id"
            (click)="activeTab = tab.id">
            <mat-icon>{{ tab.icon }}</mat-icon>
            <span>{{ tab.label }}</span>
          </button>
        }
      </nav>
    </aside>

    <div class="settings-content">
      @if (activeTab === 'profile') {
        <div class="content-section">
          <h2>{{ text.settings.profile.title }}</h2>

          <div class="profile-header">
            <div class="profile-avatar-section">
              <img [src]="user.avatar" alt="Profile" class="profile-avatar">
              <button class="btn-secondary" (click)="changeAvatar()">{{ text.settings.profile.changeAvatar }}</button>
            </div>
          </div>

          <form class="settings-form">
            <div class="form-row">
              <div class="form-group">
                <label for="firstName">{{ text.settings.profile.firstName }}</label>
                <input type="text" id="firstName" [(ngModel)]="user.firstName" name="firstName">
              </div>
              <div class="form-group">
                <label for="lastName">{{ text.settings.profile.lastName }}</label>
                <input type="text" id="lastName" [(ngModel)]="user.lastName" name="lastName">
              </div>
            </div>

            <div class="form-group">
              <label for="email">{{ text.settings.profile.email }}</label>
              <input type="email" id="email" [(ngModel)]="user.email" name="email">
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="phone">{{ text.settings.profile.phone }}</label>
                <input type="tel" id="phone" [(ngModel)]="user.phone" name="phone">
              </div>
              <div class="form-group">
                <label for="department">{{ text.settings.profile.department }}</label>
                <input type="text" id="department" [(ngModel)]="user.department" name="department" readonly>
              </div>
            </div>

            <div class="form-group">
              <label for="role">{{ text.settings.profile.role }}</label>
              <input type="text" id="role" [(ngModel)]="user.role" name="role" readonly>
            </div>

            <div class="form-actions">
              <button type="button" class="btn-secondary" (click)="cancelChanges()">{{ text.common.cancel }}</button>
              <button type="submit" class="btn-primary" (click)="saveProfile()">{{ text.settings.profile.saveChanges }}</button>
            </div>
          </form>
        </div>
      }

      @if (activeTab === 'account') {
        <div class="content-section">
          <h2>{{ text.settings.account.title }}</h2>

          <div class="settings-group">
            <h3>{{ text.settings.account.changePassword }}</h3>
            <form class="settings-form">
              <div class="form-group">
                <label for="currentPassword">{{ text.settings.account.currentPassword }}</label>
                <input type="password" id="currentPassword">
              </div>
              <div class="form-group">
                <label for="newPassword">{{ text.settings.account.newPassword }}</label>
                <input type="password" id="newPassword">
              </div>
              <div class="form-group">
                <label for="confirmPassword">{{ text.settings.account.confirmPassword }}</label>
                <input type="password" id="confirmPassword">
              </div>
              <button type="submit" class="btn-primary">{{ text.settings.account.updatePassword }}</button>
            </form>
          </div>

          <div class="settings-group danger-zone">
            <h3>{{ text.settings.account.dangerZone }}</h3>
            <p class="warning-text">{{ text.settings.account.dangerText }}</p>
            <button class="btn-danger" (click)="deleteAccount()">{{ text.settings.account.deleteAccount }}</button>
          </div>
        </div>
      }

      @if (activeTab === 'notifications') {
        <div class="content-section">
          <h2>{{ text.settings.notifications.title }}</h2>

          <div class="settings-group">
            <div class="toggle-item">
              <div class="toggle-info">
                <h4>{{ text.settings.notifications.email }}</h4>
                <p>{{ text.settings.notifications.emailDesc }}</p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="notifications.email">
                <span class="slider"></span>
              </label>
            </div>

            <div class="toggle-item">
              <div class="toggle-info">
                <h4>{{ text.settings.notifications.vacation }}</h4>
                <p>{{ text.settings.notifications.vacationDesc }}</p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="notifications.vacation">
                <span class="slider"></span>
              </label>
            </div>

            <div class="toggle-item">
              <div class="toggle-info">
                <h4>{{ text.settings.notifications.timeTracking }}</h4>
                <p>{{ text.settings.notifications.timeTrackingDesc }}</p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="notifications.timeTracking">
                <span class="slider"></span>
              </label>
            </div>

            <div class="toggle-item">
              <div class="toggle-info">
                <h4>{{ text.settings.notifications.team }}</h4>
                <p>{{ text.settings.notifications.teamDesc }}</p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="notifications.team">
                <span class="slider"></span>
              </label>
            </div>
          </div>

          <button class="btn-primary" (click)="saveNotifications()">{{ text.settings.notifications.savePreferences }}</button>
        </div>
      }

      @if (activeTab === 'appearance') {
        <div class="content-section">
          <h2>{{ text.settings.appearance.title }}</h2>

          <div class="settings-group">
            <h3>{{ text.settings.appearance.theme }}</h3>
            <div class="theme-options">
              <div class="theme-card" [class.active]="theme === 'light'" (click)="theme = 'light'">
                <div class="theme-preview light"></div>
                <span>{{ text.settings.appearance.light }}</span>
              </div>
              <div class="theme-card" [class.active]="theme === 'dark'" (click)="theme = 'dark'">
                <div class="theme-preview dark"></div>
                <span>{{ text.settings.appearance.dark }}</span>
              </div>
              <div class="theme-card" [class.active]="theme === 'auto'" (click)="theme = 'auto'">
                <div class="theme-preview auto"></div>
                <span>{{ text.settings.appearance.auto }}</span>
              </div>
            </div>
          </div>

          <div class="settings-group">
            <h3>{{ text.settings.appearance.fontFamily }}</h3>
            <div class="font-options">
              @for (font of fonts; track font.id) {
                <div
                  class="font-card"
                  [class.active]="selectedFont === font.id"
                  [style.font-family]="font.family"
                  (click)="selectFont(font.id)">
                  <span class="font-preview">{{ font.name }}</span>
                  <p class="font-sample">{{ text.settings.appearance.fontSample }}</p>
                </div>
              }
            </div>
          </div>

          <button class="btn-primary" (click)="saveAppearance()">{{ text.common.save }}</button>
        </div>
      }
    </div>
  </div>
</div>
